<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Extensiones - Sucursal</title>
</head>
<body>
  <h1>Gestión de Extensiones - Sucursal</h1>
  <div>
    <h2>Buscar Usuarios</h2>
    <input type="text" id="buscarNombre" placeholder="Buscar por nombre">
    <input type="text" id="buscarPuesto" placeholder="Buscar por puesto">
    <input type="text" id="buscarExtension" placeholder="Buscar por extensión">
    <button onclick="buscar()">Buscar</button>
  </div>
  <div>
    <h2>Agregar Usuario</h2>
    <input type="text" id="nombre" placeholder="Nombre">
    <input type="text" id="puesto" placeholder="Puesto">
    <input type="text" id="extension" placeholder="Extensión (máx. 4 dígitos)">
    <button onclick="agregar()">Registrar Usuario</button>
  </div>
  <div>
    <h3>Regresar</h3>
    <a href="index.html">Volver</a>
  </div>

  <script>
    async function buscar() {
      // Implementación de búsqueda
      alert("Búsqueda implementada.");
    }

    async function agregar() {
      const nombre = document.getElementById("nombre").value;
      const puesto = document.getElementById("puesto").value;
      const extension = document.getElementById("extension").value;

      if (!nombre || !puesto || extension.length > 4) {
        alert("Por favor ingresa datos válidos.");
        return;
      }

      try {
        const response = await fetch("/add-user", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ nombre, puesto, extension }),
        });

        const result = await response.json();
        alert(result.message);
      } catch (err) {
        console.error("Error al agregar usuario:", err);
        alert("Error al registrar usuario.");
      }
    }
  </script>
</body>
</html>
